{"version":3,"sources":["decorators/serviceExecutor.ts"],"names":[],"mappings":";AAAA,wBAAwB,8BAA8B,CAAC,CAAA;AACvD,MAAY,KAAK,WAAM,qBAAqB,CAAC,CAAA;AAE7C,6BAAyB,oCAAoC,CAAC,CAAA;AAC9D,6BAAyB,6BAA6B,CAAC,CAAA;AACvD,MAAY,UAAU,WAAM,MAAM,CAAC,CAAA;AACnC,IAAI,CAAC,GAAG,OAAO,CAAC,GAAG,CAAC,CAAC;AAErB;IAEI,OAAO,OAAO,CAAC,WAAmB,EAAE,UAAkB,EAAE,MAAW;QAC/D,IAAI,QAAQ,GAAG,iBAAS,CAAC,wBAAwB,CAAC,CAAC,uBAAU,CAAC,OAAO,CAAC,CAAC,CAAC;QACxE,IAAI,OAAO,GAAG,UAAU,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,WAAW,IAAI,WAAW,CAAC,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,cAAc,EAAE,CAAC;QAChJ,EAAE,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC;YACV,IAAI,KAAK,GAAG,EAAE,CAAC;YACf,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;YACnB,IAAI,GAAG,GAAG,OAAO,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC;YAClE,EAAE,CAAC,CAAC,KAAK,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;gBACvB,MAAM,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM;oBAClB,MAAM,CAAC,MAAM,CAAC;gBAClB,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,GAAG;oBACT,uBAAU,CAAC,QAAQ,CAAC,qCAAqC,GAAG,GAAG,CAAC,CAAC;oBACjE,MAAM,GAAG,CAAC;gBACd,CAAC,CAAC,CAAC;YACP,CAAC;YACD,IAAI,CAAC,CAAC;gBACF,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;YACvB,CAAC;QACL,CAAC;QACD,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IACxB,CAAC;AACL,CAAC;AAvBY,uBAAe,kBAuB3B,CAAA;AAED;kBAAe,eAAe,CAAC","file":"serviceExecutor.js","sourcesContent":["import {MetaUtils} from \"nodedata/core/metadata/utils\";\nimport * as Utils from \"nodedata/core/utils\";\nimport {IPostfilterParams} from 'nodedata/core/decorators/interfaces';\nimport {Decorators} from 'nodedata/core/constants/decorators';\nimport {winstonLog} from 'nodedata/logging/winstonLog';\nimport * as Enumerable from 'linq';\nvar Q = require('q');\n\nexport class ServiceExecutor {\n\n    static execute(serviceName: string, methodName: string, params: any) {\n        var services = MetaUtils.getMetaDataForDecorators([Decorators.SERVICE]);\n        var service = Enumerable.from(services).where(x => x.metadata[0].params.serviceName == serviceName).select(x => x.metadata[0]).firstOrDefault();\n        if (service) {\n            var param = [];\n            param.push(params);\n            var ret = service.target[methodName].apply(service.target, param);\n            if (Utils.isPromise(ret)) {\n                return ret.then(result => {\n                    return result;\n                }).catch((err) => {\n                    winstonLog.logError('[ServiceExecutor : execute]: error ' + err);\n                    throw err;\n                });\n            }\n            else {\n                return Q.when(ret);\n            }\n        }\n        return Q.when(true);\n    }\n}\n\nexport default ServiceExecutor;"]}